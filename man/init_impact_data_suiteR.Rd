% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/initialise_package.R
\name{init_impact_data_suiteR}
\alias{init_impact_data_suiteR}
\title{Initialize the Impact Data SuiteR workflow}
\usage{
init_impact_data_suiteR()
}
\arguments{
\item{None}{This function takes no user‑supplied parameters: it relies on environment variables being set for paths (e.g., `Sys.getenv("kobo")`, `Sys.getenv("raw_dataset")`, `Sys.getenv("audit_dir")`, `Sys.getenv("user_username")`, `Sys.getenv("user_password")`).}
}
\value{
Invisibly returns `NULL`. The primary effect is side‑effects: packages loaded, scripts sourced, environment variables prepared, relevant global objects created (e.g., `kobo_survey`, `kobo_choices`, `cols_numeric`, `values_to_check`, `other_labels`, `other_db`), and audit‑zip produced.
}
\description{
This function prepares the environment for the full data‑cleaning and analysis workflow. It installs/loads required packages, sources custom utility scripts, loads the KOBO survey and choices sheets (using environment variable paths), checks for relevant constraints, and sets up other initial variables such as numeric column names, special value lists, and audits.
}
\details{
This function performs the following steps to initialize the workflow:
\itemize{
  \item Installs the \code{pacman} package if missing, then loads a predefined suite of packages including \code{devtools}, \code{tidyverse}, \code{readxl}, \code{writexl}, \code{openxlsx}, \code{randomcoloR}, \code{anytime}, \code{qdapRegex}, \code{sf}, \code{leaflet}, \code{leaflet.extras}, \code{crayon}, \code{listr}, \code{zip}, \code{httr}, \code{glue}, \code{googlesheets4}, \code{robotoolbox}, \code{shiny}, \code{RDS}, \code{ggplot2}, \code{lubridate}.
  \item Loads the \code{cleaningtools} package. To install, use \code{devtools::install_github("impact-initiatives/cleaningtools")}
  \item Sets global options: \code{options(scipen = 999)} and \code{options(dplyr.summarise.inform = FALSE)}.
  \item Sources two scripts from \code{src/}: \code{check_kobo.R} and \code{utils_cleaning.R}.
  \item Reads the KOBO survey tool (sheet “survey”) and choices tool (sheet “choices”) from the Excel file specified by the \code{KOBO} environment variable. The data is then cleaned: column names set to lowercase, \code{q_type} and \code{list_name} computed, and special types (e.g., \code{resp_name}, \code{resp_phone_number}) forced to type \code{text}.
  \item Calls \code{check_constraints(questions = kobo_survey, choices = kobo_choices)} to identify any issues with \code{selected(question_name, question_answer)} constraints. If any are found, a warning is issued listing the problematic constraints.
  \item Derives \code{cols_numeric} as a vector of column names from \code{kobo_survey} whose \code{type} is “integer” or “decimal”.
  \item Defines \code{values_to_check} as a hard‑coded vector of numeric codes (e.g., 96, 97, 98, 99, 999, 88, 888, ‑96, ‑97, ‑98, ‑99, ‑999) for later cleaning.
  \item Generates \code{other_labels} and \code{other_db} by calling internal helper functions \code{get_other_labels()} and \code{get_other_db()}.
  \item Downloads audit files using \code{download_audit_files()}, then creates a zip archive of the audit directory (if it exists), using environment variables for the raw dataset path, audit directory, user credentials, and audits file path.
  \item Prints progress messages to the console to indicate loading and initialization status.
}
}
\examples{
\dontrun{
  # Ensure environment variables are correctly set:
  Sys.setenv(kobo = "path/to/kobo_tool.xlsx",
             raw_dataset = "path/to/raw_dataset.xlsx",
             audit_dir = "path/to/audit_folder",
             user_username = "myusername",
             user_password = "mypassword",
             audits = "path/to/audits.zip")
  # Run the initialization
  init_impact_data_suiteR()
}

}
