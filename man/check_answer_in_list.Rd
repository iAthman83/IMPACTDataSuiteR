% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/check_kobo.R
\name{check_answer_in_list}
\alias{check_answer_in_list}
\title{Checking the XLS Kobo tools for constraints errors}
\usage{
check_answer_in_list(questions, choices, constraint)
}
\arguments{
\item{questions}{A data frame (from the XLS Kobo “survey” sheet) containing at least the columns `name` and `type`.}

\item{choices}{A data frame (from the XLS Kobo “choices” sheet) containing at least the columns `list_name` and `name`.}

\item{constraint}{A single constraint string of the form `selected(question_name, question_answer)` (or multiple if comma-separated).}
}
\value{
A logical value: `TRUE` if the constraint is valid (i.e., the answer exists in the choices list for the question) or `FALSE` if it is invalid.
}
\description{
These functions check the relevant column in the questionnaire and flag issues with constraints of the form `selected(question_name, question_answer)`.
}
\details{
This function is intended to be used internally by your package to verify that for each question whose `relevant` (or `constraint`) field uses the `selected()` operator, the given `question_answer` is indeed present in the relevant choices list (which is derived from `question_type` by removing the prefix up to the last space).
If the question type is `calculate`, the function returns `TRUE` automatically (i.e., the constraint is not applicable).
}
\examples{
\dontrun{
questions_df <- data.frame(name = c("q1","q2"), type = c("select_one list1","calculate"))
choices_df   <- data.frame(list_name = "list1", name = c("yes","no"))
check_answer_in_list(questions_df, choices_df, "selected(q1,'yes')")
check_answer_in_list(questions_df, choices_df, "selected(q1,'maybe')") # will give FALSE
}
}
